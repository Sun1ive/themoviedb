(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],l=0,f=[];l<s.length;l++)a=s[l],i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={3:0},i={3:0},o=[];function s(t){return c.p+"js/"+({}[t]||t)+"."+{0:"8c7ca595",1:"54ab13ae"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={1:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise(function(e,n){for(var r="css/"+({}[t]||t)+"."+{0:"31d6cfe0",1:"652e8d69"}[t]+".css",a=c.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===r||u===a))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],u=s.getAttribute("data-href");if(u===r||u===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");i.request=r,n(i)},f.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(f)}).then(function(){a[t]=0}));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise(function(e,n){r=i[t]=[e,n]});e.push(r[2]=o);var u,l=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,c.nc&&f.setAttribute("nonce",c.nc),f.src=s(t),u=function(e){f.onerror=f.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}i[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:f})},12e4);f.onerror=f.onload=u,l.appendChild(f)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/themoviedb/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var f=0;f<u.length;f++)e(u[f]);var d=l;o.push([5,2]),n()})({"0lfv":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("xmWZ"),a=n("qpph"),i=function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,null,[{key:"set",value:function(t,e){window.localStorage.setItem(t,JSON.stringify(e))}},{key:"get",value:function(t){var e=window.localStorage.getItem(t);return e?JSON.parse(e):null}},{key:"remove",value:function(t){window.localStorage.removeItem(t)}}]),t}()},5:function(t,e,n){t.exports=n("zUnb")},"7EbL":function(t,e,n){},BaI3:function(t,e,n){"use strict";var r=n("ynlY"),a=n.n(r);a.a},Bd8B:function(t,e,n){},ZCWV:function(t,e,n){"use strict";var r=n("7EbL"),a=n.n(r);a.a},fiig:function(t,e,n){"use strict";var r=n("Bd8B"),a=n.n(r);a.a},"sZ/N":function(t,e,n){},ynlY:function(t,e,n){},zUnb:function(t,e,n){"use strict";n.r(e);n("VRzm");var r=n("Kw5r"),a=n("zlta"),i=n.n(a),o=(n("lT/x"),n("0lfv")),s=n("jE9Z"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-snackbar",{attrs:{color:t.color,timeout:t.timeout,top:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[t._v("\n    "+t._s(t.message)+"\n  ")]),n("v-layout",{attrs:{"justify-center":"","align-center":""}},[n("v-flex",{attrs:{xs10:""}},[n("v-text-field",{staticClass:"search__input",attrs:{label:"Search","prepend-icon":"search"},model:{value:t.query,callback:function(e){t.query="string"===typeof e?e.trim():e},expression:"query"}})],1)],1),t.getMovies.length>0?n("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},t._l(t.getMovies,function(e){return n("v-flex",{key:e.id,staticClass:"mx-2 my-2",attrs:{xs10:"",sm4:"",md3:"",lg2:""}},[n("v-card",{staticClass:"mycard"},[n("v-card-media",{staticClass:"mycard__media",attrs:{src:"https://image.tmdb.org/t/p/w200/"+e.poster_path,height:"350"}},[n("div",{staticClass:"overflow",on:{click:function(n){t.$router.push("/movie/"+e.id)}}})]),n("v-card-title",[n("b",[t._v(t._s(e.title))])]),n("v-card-text",t._l(e.genre_ids,function(e){return n("div",{key:e,staticClass:"genres"},[t._v("\n            # "+t._s(t.getGenres.find(function(t){return t.id===e}).name)+"\n          ")])})),n("v-card-actions",{staticStyle:{"margin-top":"auto"}},[n("v-btn",{attrs:{flat:"",fab:""},on:{click:function(n){t.handleFavorites(e.id)}}},[n("v-icon",{attrs:{color:t.$store.getters.isFavorite(e.id),large:""}},[t._v("star")])],1)],1)],1)],1)})):t._e(),n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{attrs:{xs10:"",sm6:""}},[n("v-pagination",{attrs:{length:t.getPages,"total-visible":15,value:t.page},on:{input:t.fetchNextPage}})],1)],1)],1)},u=[],l=(n("Z2Ku"),n("L9s1"),{data:function(){return{message:"Success",status:!1,color:"green",timeout:1e3}}}),f=r["a"].extend({mixins:[l],data:function(){return{query:""}},computed:{getMovies:function(){var t=this;return this.query.length>0?this.$store.getters.getMovies.filter(function(e){return e.title.toLowerCase().includes(t.query.toLowerCase())}):this.$store.getters.getMovies},getGenres:function(){return this.$store.getters.getGenres},getFavorites:function(){return this.$store.getters.getFavorites},getPages:function(){return this.$store.getters.getPages},page:function(){return this.$store.getters.currentPage}},methods:{handleFavorites:function(t){-1!==this.getFavorites.indexOf(t)?(this.$store.commit("removeFromFavorite",t),this.message="Successfully removed from favorites",this.status=!0):(this.$store.commit("addToFavorite",t),this.message="Successfully added to favorites",this.status=!0),o["a"].set("favoriteMovies",this.getFavorites)},fetchNextPage:function(t){this.$store.commit("setPage",t),this.$store.dispatch("fetchData")}}}),d=f,v=(n("fiig"),n("KHd+")),g=Object(v["a"])(d,c,u,!1,null,"c0161e8c",null),p=g.exports;r["a"].use(s["a"]);var m=new s["a"]({routes:[{path:"/",name:"home",component:p},{path:"/favorites",name:"favorites",component:function(){return n.e(1).then(n.bind(null,"SNW2"))}},{path:"/movie/:id",name:"movie-id",component:function(){return n.e(0).then(n.bind(null,"3vZA"))},props:!0}]}),h=n("L2JU"),y=(n("a1Th"),n("ls82"),n("MECJ")),b=n("vDqi"),x=n.n(b),w={apiKey:"8045d0c665abeac3296af280966d176e",apiKeyAuth:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4MDQ1ZDBjNjY1YWJlYWMzMjk2YWYyODA5NjZkMTc2ZSIsInN1YiI6IjViMWFhOTU1MGUwYTI2MWY5YTAxNDY1NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.PoeTcYoU-IKllrgUiAtjii4h0_3QGIiCaaiky9wjEqQ",URL:"https://api.themoviedb.org"},_={page:1,movies:[],genres:[],totalResults:0},j={setMovies:function(t,e){t.movies=e},setGenres:function(t,e){t.genres=e},setTotalResults:function(t,e){t.totalResults=e},setPage:function(t,e){t.page=e}},S={fetchData:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.commit,t.prev=1,r("setLoading",!0),t.next=5,x.a.get("".concat(w.URL,"/3/movie/popular?api_key=").concat(w.apiKey,"&language=ru-RU&page=").concat(n.page));case 5:return a=t.sent,i=a.data,t.next=9,x.a.get("".concat(w.URL,"/3/genre/movie/list?&api_key=").concat(w.apiKey));case 9:o=t.sent,s=o.data,r("setMovies",i.results),r("setTotalResults",i.total_results),r("setGenres",s.genres),r("setLoading",!1),t.next=20;break;case 17:throw t.prev=17,t.t0=t["catch"](1),new Error("Error has occured ".concat(t.t0.response.data.status_message));case 20:case"end":return t.stop()}},t,this,[[1,17]])}));return function(e){return t.apply(this,arguments)}}(),fetchRecommendations:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.state,t.prev=1,t.next=4,x.a.get("".concat(w.URL,"/3/movie/").concat(n.toString(),"/recommendations?api_key=").concat(w.apiKey));case 4:return r=t.sent,a=r.data,t.abrupt("return",a.results.slice(0,4));case 9:throw t.prev=9,t.t0=t["catch"](1),new Error("Error has occured ".concat(t.t0.response.data.status_message));case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},O={getMovies:function(t){return t.movies},getGenres:function(t){return t.genres},getPages:function(t){return Math.ceil(t.totalResults/20)},currentPage:function(t){return t.page},isFavorite:function(t,e){return function(t){return e.getFavorites.indexOf(t)>-1?"yellow":"grey"}}},k={state:_,mutations:j,actions:S,getters:O},L={favorites:[],isLoading:!1},P={setFavorites:function(t,e){t.favorites=e},removeFromFavorite:function(t,e){var n=t.favorites.indexOf(e);t.favorites.splice(n,1)},addToFavorite:function(t,e){-1===t.favorites.indexOf(e)&&t.favorites.push(e)},setLoading:function(t,e){t.isLoading=e}},C={getFavorites:function(t){return t.favorites},isLoading:function(t){return t.isLoading}},M={state:L,mutations:P,getters:C};r["a"].use(h["a"]);var N=new h["a"].Store({modules:{api:k,app:M}}),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("Toolbar"),n("v-content",{attrs:{"fill-height":""}},[n("v-container",{attrs:{fluid:""}},[n("transition",{attrs:{name:"slide",mode:"out-in"}},[t.loading?n("Loader",{staticStyle:{margin:"0 auto"},attrs:{"animation-duration":2e3,size:100,color:"#1976D2"}}):n("router-view")],1)],1)],1)],1)},F=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{attrs:{color:"primary"}},[n("v-toolbar-title",{staticClass:"white--text"},[t._v("Find movies")]),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{dark:"",flat:"",to:"/"}},[t._v("Home")]),n("v-btn",{attrs:{dark:"",flat:"",to:"/favorites"}},[t._v("Favorites")])],1),n("v-spacer")],1)},$=[],I={},R=Object(v["a"])(I,E,$,!1,null,null,null),J=R.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fingerprint-spinner",style:t.spinnerStyle},t._l(t.ringsStyles,function(t,e){return n("div",{key:e,staticClass:"spinner-ring",style:t})}))},Y=[],D=(n("91GP"),n("xfY5"),{name:"FingerprintSpinner",props:{animationDuration:{type:Number,default:1500},size:{type:Number,default:60},color:{type:String,default:"#333"}},data:function(){return{ringsNum:9,containerPadding:2}},computed:{outerRingSize:function(){return this.size-2*this.containerPadding},spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),padding:"".concat(this.containerPadding,"px")}},ringStyle:function(){return{borderTopColor:this.color,animationDuration:"".concat(this.animationDuration,"ms")}},ringsStyles:function(){for(var t=[],e=this.outerRingSize/this.ringsNum,n=e,r=1;r<=this.ringsNum;r++){var a=Object.assign({animationDelay:"".concat(50*r,"ms"),height:"".concat(e+(r-1)*n,"px"),width:"".concat(e+(r-1)*n,"px")},this.ringStyle);t.push(a)}return t}}}),U=D,Z=(n("BaI3"),Object(v["a"])(U,z,Y,!1,null,"6113c9f7",null)),B=Z.exports,W=r["a"].extend({components:{Toolbar:J,Loader:B},computed:{loading:function(){return this.$store.getters.isLoading}}}),q=W,G=(n("ZCWV"),Object(v["a"])(q,T,F,!1,null,null,null)),A=G.exports;n("sZ/N");r["a"].config.productionTip=!1,r["a"].use(i.a),new r["a"]({created:function(){this.$store.dispatch("fetchData");var t=o["a"].get("favoriteMovies");t&&this.$store.commit("setFavorites",t)},store:N,router:m,render:function(t){return t(A)}}).$mount("#app")}});
//# sourceMappingURL=app.e5bb0be2.js.map